<!DOCTYPE html>
<html lang="en">
  <head>
    <title>EOS PREMIER BANK</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!-- Favicon -->
    <link href="../../images/logo.jpg" rel="icon" />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../../css/login.css" />
  </head>
  <body data-type="user">
    <div class="containered">
      <div class="content-containered">
        <div class="top-containered">
          <h5>Sign In</h5>
          <div style="font-size: smaller" id="successMessageContainer"></div>

          <% if (authErrorMessage) { %>
          <div style="text-align: center; color: black">
            <%= authErrorMessage %>
          </div>
          <% } %>
        </div>

        <form id="loginForm" data-url="/auth/user/userLoginPost" method="post">
          <div id="credentialsSection">
            <input
              type="text"
              name="username"
              id="username"
              placeholder="Username"
              style="width: 95%; height: 30px"
            />
            <input
              type="password"
              name="password"
              id="password"
              placeholder="Password"
              style="height: 25px; font-size: 14px"
            />
          </div>
          <div id="pinSection" style="display: none">
            <img id="userImage" src="" alt="User Image" style="display: none" />
            <input
              type="password"
              name="pin"
              id="pin"
              style="height: 25px"
              placeholder="Enter PIN"
            />
          </div>

          <input
            id="submitButton"
            class="button"
            type="submit"
            value="Sign In"
            style="height: 25px"
          />
        </form>
        <div class="pw-forgot">
          <a href="/auth/user/forgetPassword">Forgot Password?</a>
        </div>
      </div>
      <div id="imageContainer" class="image-containered"></div>
    </div>
    <script>
      // Function to get query parameters from the URL
      function getQueryParams() {
        const params = {};
        const searchParams = new URLSearchParams(window.location.search);
        for (const [key, value] of searchParams.entries()) {
          params[key] = value;
        }
        return params;
      }

      // Check for successMessage in the URL and display it
      window.onload = function () {
        const params = getQueryParams();
        if (params.successMessage) {
          alert(decodeURIComponent(params.successMessage));
          // Optionally, remove the query parameter after showing the alert
          const newUrl = window.location.href.split('?')[0];
          window.history.replaceState(null, null, newUrl);
        }
      };
    </script>

    <script src="../../js/jquery-3.3.1.min.js"></script>
    <script src="../../js/jquery-ui.js"></script>
    <script src="../../js/popper.min.js"></script>
    <script src="../../js/bootstrap.min.js"></script>
    <script src="../../js/owl.carousel.min.js"></script>
    <script src="../../js/jquery.countdown.min.js"></script>
    <script src="../../js/jquery.easing.1.3.js"></script>
    <script src="../../js/aos.js"></script>
    <script src="../../js/jquery.fancybox.min.js"></script>
    <script src="../../js/jquery.sticky.js"></script>
    <script src="../../js/isotope.pkgd.min.js"></script>

    <script src="../../js/main.js"></script>
    <script src="../../mail/userlogin.js"></script>
  </body>
</html>
